import{r as e,j as l,a as h}from"./index-DncdO8gK.js";import{a as b}from"./TextComponent-CzJ7ZoTU.js";import{A as v}from"./AuthForm-Bl5Nt2zg.js";import{N as x}from"./NotifToast-ex8GX-nc.js";import"./Logo-WNNm-75N.js";import"./SpinnerLoading-D93FR3Qw.js";function N(){const s=e.useRef([]),[o,u]=e.useState(),[d,n]=e.useState(!1),m="https://pensive-volhard-wbilxm8r4.liara.run",[c,i]=e.useState({message:"",status:""}),[f,p]=e.useState();e.useEffect(()=>{document.title="فراموشی رمز عبور"},[]);const g=async()=>{var r;(r=s==null?void 0:s.current)==null||r.map(t=>{t.value===""?b(a=>{u(a)},t.getAttribute("data-label"),t.value,o,t.type):p(t.value)})};return e.useEffect(()=>{var t;const r=async()=>{try{n(!0);const a=await h.post(`${m}/api/users/forgetPassword`,{email:s==null?void 0:s.current[0].value});a!==void 0&&(a.data.status==="success"&&i({message:"ایمیلی برای شما ارسال شد!",status:"success"}),n(!1))}catch(a){n(!1),a&&i({message:"کاربری بااین ایمیل یافت نشد",status:"fail"})}};f&&(o&&((t=Object==null?void 0:Object.keys(o))==null?void 0:t.length)==0||o===void 0)&&r()},[f]),l.jsxs(l.Fragment,{children:[c.message&&l.jsx(x,{setNotif:i,notif:c}),l.jsx(v,{fieldes:[{label:"ایمیل",type:"email",valueType:"email"}],handleBtn:g,headerLabel:"فراموشی رمز عبور",inputRefs:s,validation:o,setValidation:u,loading:d,otherLink:[{label:"رمز عبورم یادمه :)",link:"/login"}],btnLabel:"ارسال"})]})}export{N as default};
