import{r as e,j as n,a as h}from"./index-Dqs9VKQ8.js";import{a as b}from"./TextComponent-D6PAFMwB.js";import{A as v}from"./AuthForm-DhXKLV11.js";import{N as x}from"./NotifToast-fylJSDU5.js";import"./Logo-CKMg8dcg.js";import"./SpinnerLoading-BJnfxrdr.js";function S(){const s=e.useRef([]),[o,u]=e.useState(),[d,l]=e.useState(!1),m="http://127.0.0.1:3000",[c,i]=e.useState({message:"",status:""}),[f,p]=e.useState();e.useEffect(()=>{document.title="فراموشی رمز عبور"},[]);const g=async()=>{var r;(r=s==null?void 0:s.current)==null||r.map(t=>{t.value===""?b(a=>{u(a)},t.getAttribute("data-label"),t.value,o,t.type):p(t.value)})};return e.useEffect(()=>{var t;const r=async()=>{try{l(!0);const a=await h.post(`${m}/api/users/forgetPassword`,{email:s==null?void 0:s.current[0].value});a!==void 0&&(a.data.status==="success"&&i({message:"ایمیلی برای شما ارسال شد!",status:"success"}),l(!1))}catch(a){l(!1),a&&i({message:"کاربری بااین ایمیل یافت نشد",status:"fail"})}};f&&(o&&((t=Object==null?void 0:Object.keys(o))==null?void 0:t.length)==0||o===void 0)&&r()},[f]),n.jsxs(n.Fragment,{children:[c.message&&n.jsx(x,{setNotif:i,notif:c}),n.jsx(v,{fieldes:[{label:"ایمیل",type:"email",valueType:"email"}],handleBtn:g,headerLabel:"فراموشی رمز عبور",inputRefs:s,validation:o,setValidation:u,loading:d,otherLink:[{label:"رمز عبورم یادمه :)",link:"/login"}],btnLabel:"ارسال"})]})}export{S as default};
