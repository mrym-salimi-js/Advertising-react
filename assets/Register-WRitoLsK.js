import{r as s,u as y,j as l,a as h,n as T}from"./index-CbeBIUc8.js";import{a as x,b as m}from"./TextComponent-Cno3bZzp.js";import{A as w}from"./AuthForm-CiZPcIzn.js";import{N as j}from"./NotifToast-CU7UKOzJ.js";import"./Logo-C0IGYkvB.js";import"./SpinnerLoading-CzyXvECM.js";function V(){const e=s.useRef([]),[o,n]=s.useState(),p=y(),v="http://127.0.0.1:3000",[f,i]=s.useState(!1),[u,c]=s.useState({message:"",status:""}),[d,b]=s.useState();s.useEffect(()=>{document.title="ثبت نام کاربر"},[]);const g=async()=>{var r;(r=e==null?void 0:e.current)==null||r.map(a=>{a.value===""?x(t=>{n(t)},a.getAttribute("data-label"),a.value,o,a.type):b(a.value)})};return s.useEffect(()=>{var a;const r=async()=>{try{i(!0);const t=await h.post(`${v}/api/users/register`,{name:e==null?void 0:e.current[0].value,email:e==null?void 0:e.current[1].value,password:e==null?void 0:e.current[2].value,passwordConfirm:e==null?void 0:e.current[3].value});t!==void 0&&(t.data.status==="success"&&m.remove("user-pass"),m.set("user-Token",t.data.token),T("/dashboard","",p))}catch(t){i(!1),t.response.status!==200&&c({message:"خطایی رخ داده",status:"fail"})}};d&&(o&&((a=Object==null?void 0:Object.keys(o))==null?void 0:a.length)==0||o===void 0)&&r()},[d]),l.jsxs(l.Fragment,{children:[u.message&&l.jsx(j,{setNotif:c,notif:u}),l.jsx(w,{fieldes:[{label:"نام",type:"name",valueType:"text"},{label:"ایمیل",type:"email",valueType:"email"},{label:"رمز عبور",type:"password",valueType:"password"},{label:"تکرار رمز عبور",type:"password-confirm",valueType:"password"}],handleBtn:g,headerLabel:"ثبت نام کاربر",inputRefs:e,validation:o,setValidation:n,loading:f,otherLink:[{label:"قبلا ثبت نام کردی؟",link:"/login"}],btnLabel:"ثبت نام"})]})}export{V as default};
